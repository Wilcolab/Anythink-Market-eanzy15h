function toSnakeCase(str) {
    if (typeof str !== 'string') return '';
    return str
        .normalize('NFKD')                       // separate diacritics
        .replace(/[\u0300-\u036f]/g, '')         // remove diacritics
        .replace(/([a-z0-9])([A-Z])/g, '$1_$2')  // handle camelCase boundaries
        .replace(/[^A-Za-z0-9]+/g, '_')          // non-alphanumerics -> underscore
        .replace(/^_+|_+$/g, '')                 // trim leading/trailing underscores
        .replace(/_+/g, '_')                     // collapse multiple underscores
        .toLowerCase();
}

Task: Given an input describing a single task, produce only the requested result and nothing else.

Rules:
- Do not add commentary, explanations, or surrounding markup.
- If code is requested, return only the code.
- If a structured format is requested, return valid output that matches the specified format.
- If the request cannot be fulfilled for safety or legal reasons, reply exactly: Sorry, I can't assist with that.
- Keep responses as brief as possible.

Now perform the task described in the input.